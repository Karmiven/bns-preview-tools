<Window
	    x:Class="Xylia.Preview.UI.Art.GameUI.Scene.Game_QuestJournal.Game_QuestJournalScene"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	    xmlns:c="clr-namespace:Xylia.Preview.UI.Common.Controls"
        xmlns:local="clr-namespace:Xylia.Preview.UI.Art.GameUI.Scene.Game_QuestJournal"
	    xmlns:data="clr-namespace:Xylia.Preview.Data.Models;assembly=Preview.Core"
        Title="QuestJournal" Height="450" Width="850" MinHeight="450" MinWidth="850">
	<Window.Resources>
		<ContextMenu x:Key="ExtractMenu">
			<MenuItem Click="Extract_QuestList_Click" Header="导出任务列表"/>
			<MenuItem Click="Extract_EpicQuestList_Click" Header="导出主线任务列表"/>
		</ContextMenu>
	</Window.Resources>

	<TabControl>
		<TabItem x:Name="QuestJournal_Tab_RadioButton_1" Header="正在进行" >
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="250" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<TreeView x:Name="TreeView1" Grid.Column="0" SelectedItemChanged="ProgressTab_SelectedItemChanged" 
						  VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling">
					<TreeView.Resources>
						<ContextMenu x:Key="QuestMenu">
							<MenuItem Click="ViewRawData_Click" Header="查看原始文件"/>
						</ContextMenu>
						<DataTemplate DataType="{x:Type data:Quest}">
							<Grid ContextMenu="{StaticResource QuestMenu}" VerticalAlignment="Center" HorizontalAlignment="Left" >
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto" />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>

								<TextBlock Grid.Column="0" Text="{Binding RecordId}" FontSize="12" Margin="0 0 5 0"/>
								<TextBlock Grid.Column="1" Text="{Binding Text}" FontSize="15" />
							</Grid>
						</DataTemplate>
					</TreeView.Resources>
				</TreeView>
				<local:QuestJournalPanel x:Name="QuestJournalPanel" Grid.Column="1" Margin="10 0 0 0" />
			</Grid>
		</TabItem>

		<TabItem x:Name="QuestJournal_Tab_RadioButton_4" Header="入手书信" />

		<TabItem x:Name="QuestJournal_Tab_RadioButton_2" Header="红尘往事" >
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="220" />
					<ColumnDefinition Width="*" />
				</Grid.ColumnDefinitions>

				<TreeView x:Name="TreeView2" Grid.Column="0" SelectedItemChanged="CompletedTab_SelectedItemChanged" ContextMenu="{StaticResource ExtractMenu}" >
					<TreeView.Resources>
						<DataTemplate DataType="{x:Type data:Quest}">
							<StackPanel Orientation="Horizontal">
								<TextBlock Text="{Binding Text}" />
							</StackPanel>
						</DataTemplate>
					</TreeView.Resources>
				</TreeView>
				<c:BnsCustomLabelWidget x:Name="TextBlock2" Grid.Column="1" FontSize="15" Margin="10" />
			</Grid>
		</TabItem>

		<TabItem x:Name="QuestJournal_Tab_RadioButton_3" Header="完成任务" Visibility="Hidden" />
	</TabControl>
</Window>